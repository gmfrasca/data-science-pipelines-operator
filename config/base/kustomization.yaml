apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: odh-applications
namePrefix: data-science-pipelines-operator-
resources:
  - ../crd
  - ../rbac
  - ../manager
  - ../prometheus
  - ../configmaps

# Parameterize images via KfDef in ODH
configMapGenerator:
  - name: dspo-parameters
    envs:
      - params.env
vars:
  - name: IMAGES_APISERVER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_APISERVER
  - name: IMAGES_ARTIFACT
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_ARTIFACT
  - name: IMAGES_OAUTHPROXY
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_OAUTHPROXY
  - name: IMAGES_PERSISTENTAGENT
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_PERSISTENTAGENT
  - name: IMAGES_SCHEDULEDWORKFLOW
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_SCHEDULEDWORKFLOW
  - name: IMAGES_CACHE
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_CACHE
  - name: IMAGES_MOVERESULTSIMAGE
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_MOVERESULTSIMAGE
  - name: IMAGES_MARIADB
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_MARIADB
  - name: IMAGES_MLMDENVOY
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_MLMDENVOY
  - name: IMAGES_MLMDGRPC
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_MLMDGRPC
  - name: IMAGES_MLMDWRITER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_MLMDWRITER
  - name: IMAGES_CRDVIEWER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_CRDVIEWER
  - name: IMAGES_VISUALIZATIONSERVER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_VISUALIZATIONSERVER
  - name: IMAGES_DSPO
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGES_DSPO
  - name: ZAP_LOG_LEVEL
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.ZAP_LOG_LEVEL
  - name: IMAGESV2_APISERVER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_APISERVER
  - name: IMAGESV2_ARTIFACT
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_ARTIFACT
  - name: IMAGESV2_PERSISTENTAGENT
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_PERSISTENTAGENT
  - name: IMAGESV2_SCHEDULEDWORKFLOW
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_SCHEDULEDWORKFLOW
  - name: IMAGESV2_CACHE
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_CACHE
  - name: IMAGESV2_MOVERESULTSIMAGE
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_MOVERESULTSIMAGE
  - name: IMAGESV2_MLMDENVOY
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_MLMDENVOY
  - name: IMAGESV2_MLMDGRPC
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_MLMDGRPC
  - name: IMAGESV2_MLMDWRITER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_MLMDWRITER
  - name: IMAGESV2_WORKFLOWCONTROLLER
    objref:
      kind: ConfigMap
      name: dspo-parameters
      apiVersion: v1
    fieldref:
      fieldpath: data.IMAGESV2_WORKFLOWCONTROLLER
configurations:
  - params.yaml
